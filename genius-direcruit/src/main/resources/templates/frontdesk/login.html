<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="Gurdeep singh osahan">
      <meta name="author" content="Gurdeep singh osahan">
      <title>牛人直聘</title>
      <!-- Favicon Icon -->
      <link rel="icon" type="image/png" href="/frontdesk/images/fav.svg">
      <!-- Bootstrap core CSS -->
      <link href="/frontdesk/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
      <!-- Font Awesome-->
      <link href="/frontdesk/vendor/fontawesome/css/font-awesome.min.css" rel="stylesheet">
      <!-- Material Design Icons -->
      <link href="/frontdesk/vendor/icons/css/materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css">
      <!-- Slick -->
      <link href="/frontdesk/vendor/slick-master/slick/slick.css" rel="stylesheet" type="text/css">
      <!-- Lightgallery -->
      <link href="/frontdesk/vendor/lightgallery-master/dist/css/lightgallery.min.css" rel="stylesheet">
      <!-- Select2 CSS -->
      <link href="/frontdesk/vendor/select2/css/select2-bootstrap.css" />
      <link href="/frontdesk/vendor/select2/css/select2.min.css" rel="stylesheet">
      <!-- Custom styles for this template -->
      <link href="/frontdesk/css/style.css" rel="stylesheet">
   </head>
   <body>
      <!-- Login -->
      <div class="bg-white">
         <div class="container">
            <div class="row justify-content-center align-items-center d-flex vh-100">
               <div class="col-lg-4 mx-auto">
                  <div class="osahan-login py-4">
                     <div class="text-center mb-4">
                        <a href="../backstage/index.html"><img src="/frontdesk/images/fav.svg" alt=""></a>
                        <h5 class="font-weight-bold mt-3">牛人 直聘</h5>
                        <p class="text-muted">不要错过每一次机会,登录去更新你的职业世界吧</p>
                     </div>
                     <form action="javascript:void(0)" id="login" data-parsley-validate class="form-horizontal form-label-left">
                        <div class="form-group">
                           <label class="mb-1">用户名或手机</label>
                           <div class="position-relative icon-form-control">
                              <i class="mdi mdi-account position-absolute"></i>
                              <input type="name" class="form-control" id="userName" name="userName">
                           </div>
                        </div>
                        <div class="form-group">
                           <label class="mb-1">密码</label>
                           <div class="position-relative icon-form-control">
                              <i class="mdi mdi-key-variant position-absolute"></i>
                              <input type="password" class="form-control" id="userPwd" name="userPwd">
                           </div>
                        </div>

                        <div class="custom-control custom-checkbox mb-3">
                           <input type="checkbox" class="custom-control-input" id="customCheck1">
                           <label class="custom-control-label" for="customCheck1">记住密码</label>
                        </div>

                        <button class="btn btn-success btn-block text-uppercase" type="button" id="loginIn"> 登录 </button>
                     </form>

                     <form action="javascript:void(0)" id="emaillogin" data-parsley-validate class="form-horizontal form-label-left" style="display: none">
                        <div class="form-group">
                           <label class="mb-1">邮箱</label>
                           <div class="position-relative icon-form-control">
                              <i class="mdi mdi-account position-absolute"></i>
                              <input type="email" class="form-control" id="email" name="email">
                           </div>
                        </div>
                        <div class="form-group">
                           <label class="mb-1">验证码</label>
                           <div class="position-relative icon-form-control" >
                              <i class="mdi mdi-key-variant position-absolute"></i>
                              <input type="password" class="form-control" id="code" name="code" style="width: 150px;display: inline-block">
                              <div style="float: right" id="send">
                              <button class="btn btn-success" type="button"  id="emailSend"> 免费获取验证码 </button>
                              </div>
                           </div>
                        </div>
                        <button class="btn btn-success btn-block text-uppercase" type="button" id="emailloginIn"> 登录 </button>
                     </form>

                     <form action="javascript:void(0)" id="messageLogin" data-parsley-validate class="form-horizontal form-label-left" style="display: none">
                        <div class="form-group">
                           <label class="mb-1">手机号</label>
                           <div class="position-relative icon-form-control">
                              <i class="mdi mdi-account position-absolute"></i>
                              <input class="form-control" id="tel" name="tel">
                           </div>
                        </div>
                        <div class="form-group">
                           <label class="mb-1">验证码</label>
                           <div class="position-relative icon-form-control" >
                              <i class="mdi mdi-key-variant position-absolute"></i>
                              <input type="password" class="form-control" id="telcode" name="code" style="width: 150px;display: inline-block">
                              <div style="float: right">
                                 <button class="btn btn-success" type="button"  id="messageSend"> 免费获取验证码 </button>
                              </div>
                           </div>
                        </div>
                        <button class="btn btn-success btn-block text-uppercase" type="button" id="messageLoginIn"> 登录 </button>
                     </form>

                        <div class="text-center mt-3 border-bottom pb-3">
                           <p class="small text-muted">尝试其他登录方式</p>
                           <div class="row">
                              <div class="col-6">
                                 <button type="button" class="btn btn-outline-instagram btn-block" id="emailshow"><i class="mdi mdi-instagram" ></i> 邮箱登陆</button>
                              </div>
                              <div class="col-6">
                                 <button type="button" class="btn btn-outline-facebook btn-block" id="messageshow"><i class="mdi mdi-facebook" ></i> 短信登陆</button>
                              </div>
                           </div>
                        </div>
                        <div class="py-3 d-flex align-item-center">

                           <span class="ml-auto"> 新用户? <a href="/frontdesk/register">立即加入</a></span>
                           <!-- Small modal -->
                        </div>
                  </div>
               </div>
            </div>
         </div>
      </div>


      <!-- End Login -->
      <!-- Bootstrap core JavaScript -->
      <script src="/frontdesk/vendor/jquery/jquery.min.js"></script>
      <script src="/frontdesk/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
      <!-- Contact form JavaScript -->
      <!-- Do not edit these files! In order to set the email address and subject line for the contact form go to the bin/contact_me.php file. -->
      <script src="/frontdesk/js/jqBootstrapValidation.js"></script>
      <script src="/frontdesk/js/contact_me.js"></script>
      <!-- Slick -->
      <script src="/frontdesk/vendor/slick-master/slick/slick.js" type="text/javascript" charset="utf-8"></script>
      <!-- lightgallery -->
      <script src="/frontdesk/vendor/lightgallery-master/dist/js/lightgallery-all.min.js"></script>
      <!-- select2 Js -->
      <script src="/frontdesk/vendor/select2/js/select2.min.js"></script>
      <!-- Custom -->
      <script src="/frontdesk/js/custom.js"></script>
      <script>
         $(function(){
            $("#loginIn").bind("click",function () {
               checkform();
            });

            $("#emailshow").bind("click",function(){
               email();
            });
            $("#emailloginIn").bind("click",function(){
               emailLogin();
            });

            $("#emailSend").bind("click",function(){
               checkform1();
               time(this);
            });

            $("#messageshow").bind("click",function () {
               message();
            })
            $("#messageSend").bind("click",function(){
               checkform2();
               time(this);
            })
            $("#messageLoginIn").bind("click",function () {
               messageLogin();
            })
         });

         //切换成邮箱登陆
         function email() {
            $("#login").hide();
            $("#messageLogin").hide();
            $("#emaillogin").show()
         }

         //切换成手机登录
         function message() {
            $("#login").hide();
            $("#emaillogin").hide();
            $("#messageLogin").show();
         }

         //发送验证码

         //验证码禁用
         var wait=10;
         function time(o) {
            if (wait == 0) {
               o.removeAttribute("disabled");
               //o.value="免费获取验证码";
               $(o).html("免费获取验证码");
               wait = 10;
            } else {
               o.setAttribute("disabled", true);
               //o.value="重新发送(" + wait + ")";
               $(o).html("重新发送(" + wait + ")");
               wait--;
               setTimeout(function() {
                  time(o)
               }, 1000)
            }
         }

         //发送手机验证码
         function messageSend() {
            var tel = $("#tel").val();
            var url = encodeURI("/test/messageSend?tel="+tel);
            $.ajax({
               url: url,
               type: "get",
               //data:{"email":email},
               dataType: "json",
               success:function (data) {
                  alert(data.info)
               }
            })
         }

         //发送邮箱验证码
         function emailSend() {
            var email = $("#email").val();
            var url = encodeURI("/test/emailSend?email=" + email);

            $.ajax({
               url: url,
               type: "get",
               //data:{"email":email},
               dataType: "json",
               success:function (data) {
                  alert(data.info)
               }
            })
         }

         //手机登录
         function messageLogin() {
            var tel = $("#tel").val();
            var code = $("#telcode").val();
            var url = encodeURI("/test/messageLogin?tel="+tel+"&code="+code);

            $.ajax({
               url:url,
               type:"post",
               dataType:"json",
               success:function (data) {
                  if (data.info == "登录成功"){
                     location.href = "/frontjobs/index";
                  }else {
                     alert(data.info);
                  }
               }
            })
         }

         //邮箱登录
         function emailLogin() {
            var email = $("#email").val();
            var code = $("#code").val();
            var url = encodeURI("/test/emailLogin?email="+email+"&code="+code);

            $.ajax({
               url:url,
               type:"post",
               dataType:"json",
               success:function (data) {
                  if (data.info == "登录成功"){
                     location.href = "/frontjobs/index";
                  }else {
                     alert(data.info);
                  }
               }
            })
         }

         //检测手机格式
         function checkform2() {
            var pattern =/^[1][3,4,5,7,8][0-9]{9}$/;
            if (!pattern.test($("#tel").val())){
               alert('手机号码不正确');
               return false;
            }
            if (pattern.test($("#tel").val())){
               messageSend();
            }
         }

         //检测邮箱格式
         function checkform1() {
            var pattern = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
            if (!pattern.test($("#email").val())) {
               alert('邮箱格式不正确');
               return false;
            }
            if (pattern.test($("#email").val())){
               emailSend();
            }
         }


         //检测用户是否输入用户名密码
         function checkform() {

            if (document.getElementById('userName').value.length==0){
               alert('用户名不能为空');
               document.getElementById('userName').focus();
               return false;
            }

            if (document.getElementById('userPwd').value.length==0){
               alert('密码不能为空');
               document.getElementById('userPwd').focus();
               return false;
            } else {loginIn()}
         }

         //登陆方法;
         function loginIn() {
            var user ={}
            user.userName = $("#userName").val();
            user.userPwd = $("#userPwd").val();

            $.ajax({
               url:"/test/loginIn",
               type:"post",
               contentType:"application/json",
               data:JSON.stringify(user),
               dataType:"json",
               success:function (data) {
                  if (data.info == "登录成功"){
                     location.href = "/frontjobs/index";
                  }else {
                     alert(data.info);
                  }
               }
            })

         }



      </script>

   </body>
</html>