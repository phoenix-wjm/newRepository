<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="Gurdeep singh osahan">
      <meta name="author" content="Gurdeep singh osahan">
      <title>Miver</title>
      <!-- Favicon Icon -->
      <link rel="icon" type="image/png" href="/frontdesk/images/fav.svg">
      <!-- Bootstrap core CSS -->
      <link href="/frontdesk/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
      <!-- Font Awesome-->
      <link href="/frontdesk/vendor/fontawesome/css/font-awesome.min.css" rel="stylesheet">
      <!-- Material Design Icons -->
      <link href="/frontdesk/vendor/icons/css/materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css">
      <!-- Slick -->
      <link href="/frontdesk/vendor/slick-master/slick/slick.css" rel="stylesheet" type="text/css">
      <!-- Lightgallery -->
      <link href="/frontdesk/vendor/lightgallery-master/dist/css/lightgallery.min.css" rel="stylesheet">
      <!-- Select2 CSS -->
<!--      <link href="/frontdesk/vendor/select2/css/select2-bootstrap.css" />-->
      <link href="/frontdesk/vendor/select2/css/select2.min.css" rel="stylesheet">
      <!-- Custom styles for this template -->
      <link href="/frontdesk/css/style.css" rel="stylesheet">
   </head>
   <body>

      <input type="hidden" id="flag" name="flag" value="1" />
      <!-- Register -->
      <div class="bg-white">


         <div class="container">

            <div class="row justify-content-center align-items-center d-flex vh-100">

               <div class="col-lg-4 mx-auto">

                  <div class="osahan-login py-4">

                     <div class="text-center mb-4">
                        <a href="../backstage/index.html"><img src="/frontdesk/images/fav.svg" alt=""></a>
                        <h5 class="font-weight-bold mt-3">牛人直聘</h5>
<!--                        <p class="text-muted">欢迎注册</p>-->
                     </div>





                     <!--我是求职者-->
                     <form action="javascript:void(0);" id="smsForm" method="post">
                        <p style="text-align: center" class="small text-muted">打工人，打工魂，打工都是人上人!</p>

                        <div class="form-group">

                           <div class="position-relative icon-form-control">
                              <i class="mdi mdi-phone position-absolute"></i>
                              <input name="tel" id="tel" type="tel" class="form-control" placeholder="手机号">
                           </div>
                        </div>

                         <div class="form-group" style="float: left">

                               <input id="code" name="code" type="password" style="width: 150px;display: inline-block" class="form-control" placeholder="验证码" >

                               <div id="send" style="float: right;padding-left: 30px">

                                  <button type="button" class="btn btn-primary mb-2" id="messageSend">发送验证码</button>

                               </div>

                         </div>

                        <button id="smsSubmit" class="btn btn-success btn-block text-uppercase" type="button"> 注册 </button>

                     </form>




                     <!--我是招聘者-->
                     <form action="javascript:void(0);" id="smsCompanyForm" method="post" style="display: none">
                        <p style="text-align: center" class="small text-muted">招聘效果好，人才匹配度高</p>


                        <div class="form-group">

                           <div class="position-relative icon-form-control">
                              <i class="mdi mdi-phone position-absolute"></i>
                              <input id="telTwo" name="telTwo" type="tel" class="form-control" placeholder="手机号">
                           </div>
                        </div>


                        <div class="form-group" style="float: left">

                           <input id="codeTwo" name="code" type="password" style="width: 150px;display: inline-block" class="form-control" placeholder="验证码" >

                           <div id="sendTwo" style="float: right;padding-left: 30px">
                              <!--onclick="sendSmsTwo()"-->
                              <button type="button" class="btn btn-primary mb-2" id="messageSendCompany">发送验证码</button>

                           </div>

                        </div>

                        <button id="smsCompanySubmit" class="btn btn-success btn-block text-uppercase" type="button"> 注册 </button>

                     </form>




                     <div class="text-center mt-3 border-bottom pb-3">
                        <p class="small text-muted">找工作还是招聘呢？</p>
                        <div class="row">

                           <div class="col-6">
                              <button type="button" id="jobHunterShow" class="btn btn-outline-facebook btn-block"><i class="mdi mdi-facebook"></i> 我要找工作</button>
                           </div>

                           <div class="col-6">
                              <button type="button" id="companyShow" class="btn btn-outline-instagram btn-block"><i class="mdi mdi-instagram"></i> 我要招聘</button>
                           </div>

                        </div>
                     </div>


                     <div class="py-3 d-flex align-item-center">
                        <a href="forgot-password.html">忘记密码了？</a>
                        <span class="ml-auto"> 已经上Part-time Job了？ <a href="/test/login">登录</a></span>
                     </div>




                  </div>

               </div>

            </div>

         </div>


      </div>


      <!-- End Register -->
      <!-- Bootstrap core JavaScript -->
      <script src="/frontdesk/vendor/jquery/jquery.min.js"></script>
      <script src="/frontdesk/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
      <!-- Contact form JavaScript -->
      <!-- Do not edit these files! In order to set the email address and subject line for the contact form go to the bin/contact_me.php file. -->
<!--      <script src="/frontdesk/js/jqBootstrapValidation.js"></script>-->
<!--      <script src="/frontdesk/js/contact_me.js"></script>-->
      <!-- Slick -->
      <script src="/frontdesk/vendor/slick-master/slick/slick.js" type="text/javascript" charset="utf-8"></script>
      <!-- lightgallery -->
      <script src="/frontdesk/vendor/lightgallery-master/dist/js/lightgallery-all.min.js"></script>
      <!-- select2 Js -->
      <script src="/frontdesk/vendor/select2/js/select2.min.js"></script>
      <!-- Custom -->
      <script src="/frontdesk/js/custom.js"></script>
   </body>
</html>

<script>




   $(function(){

      //发送短信,求职者
      $("#messageSend").bind("click",function(){
         checkform2();
         time(this);
      });

      //短信进入,求职者
      $("#smsSubmit").bind("click", function() {
         smsEnter();
      });

      //发送短信,招聘者
      $("#messageSendCompany").bind("click",function(){
         checkform1();
         time(this);
      });

      //短信进入,招聘者
      $("#smsCompanySubmit").bind("click", function() {
         smsEnter();
      });

      //招聘者
      $("#companyShow").bind("click",function(){
         switchOne();
      });


      //求职者
      $("#jobHunterShow").bind("click",function(){
         switchTwo();
      });


   })

   //检测手机格式,招聘者
   function checkform1() {

      var pattern =/^[1][3,4,5,7,8][0-9]{9}$/;
      if (!pattern.test($("#telTwo").val())){
         alert('手机号码不正确');
         return false;
      }
      if (pattern.test($("#telTwo").val())){
         sendSms();
      }

   }

   //检测手机格式
   function checkform2() {

      var pattern =/^[1][3,4,5,7,8][0-9]{9}$/;
      if (!pattern.test($("#tel").val())){
         alert('手机号码不正确');
         return false;
      }
      if (pattern.test($("#tel").val())){
         sendSms();
      }

   }


   //验证码禁用
   var wait=10;
   function time(o) {
      if (wait == 0) {
         o.removeAttribute("disabled");
         //o.value="免费获取验证码";
         $(o).html("免费获取验证码");
         wait = 10;
      } else {
         o.setAttribute("disabled", true);
         //o.value="重新发送(" + wait + ")";
         $(o).html("重新发送(" + wait + ")");
         wait--;
         setTimeout(function() {
            time(o)
         }, 1000)
      }
   }



   //切换身份1     招聘者
   function switchOne() {
      $("#smsCompanyForm").show()
      $("#smsForm").hide()
      $("#flag").val("2");
   }


   //切换身份2    求职者
   function switchTwo() {
      $("#smsCompanyForm").hide()
      $("#smsForm").show();
      $("#flag").val("1");
   }

   //短信进入
   function smsEnter() {
      var userVo ={};
      var flag = $("#flag").val();
      if (flag == 1) {
         //求职者
         userVo.tel = $("#tel").val();
         userVo.code = $("#code").val();
      } else {
         //招聘者
         userVo.tel = $("#telTwo").val();
         userVo.code = $("#codeTwo").val();
      }

      $.ajax({
         url:"/frontdesk/smsEnter",
         type:"post",
         contentType:"application/json",
         data:JSON.stringify(userVo),
         dataType:"json",
         success:function(data){

            console.log("==========>>>"+data)

            alert(data.info);
            if(data.info=="用户已注册，请登录"){
               //访问主页面
               location.href="/test/login"


            }else {
               if (data.info=="登入成功"){

                  console.log("=====登入成功=====>>>"+flag)
                  location.href="/frontdesk/SubmissionPage?flag="+flag;
               }

            }
         }
      })
      return false;
   }


// var s = 3;

//求职者发送短信
function sendSms(){

   var flag = $("#flag").val();

   if (flag == 1) {
      //求职者
      var tel = $("#tel").val();
   } else {
      //招聘者
      var tel = $("#telTwo").val();
   }



   $.ajax({
      url:"/frontdesk/sendSms",
      type:"get",
      data:{"phone":tel},
      dataType:"json", //返回类型
      success:function(data){
         console.log(data)
         alert(data.info);
      }
   })

   // var time = setInterval(function () {
   //    //禁用发送验证码按钮  class="btn btn-outline-secondary"
   //    $("#send").html("<button type='button'  class='btn btn-outline-secondary disabled' >"+s+"秒后发送验证码</button>")
   //    s--;
   //    if(s==0){ //倒计时结束
   //       //清除计时器
   //       clearInterval(time);
   //       //启用发送验证码 class="btn btn-success"
   //       $("#send").html("<button type='button' class='btn btn-success' onclick=\"sendSms()\">发送验证码</button>")
   //    }
   //
   // },1000)

}



</script>